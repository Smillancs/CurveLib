#version 420

layout (isolines,equal_spacing) in;

in block
{
	vec3	pos;
} In[];

out block
{
	vec3	pos;
	vec3	col;
	vec3	patch_coords;
	float	k;
	float	t;
} Out;

uniform mat4 VP;
uniform int pointNum = 1;

#incl ../GPUcompute/BezierEval.glsl

#incl ../GPUcompute/GeomInvariant.glsl

void main()
{
	float u = gl_TessCoord.x;
	vec3 bpos = BernsteinEval(u);
	gl_Position = VP*vec4(bpos,1);
	Out.pos = bpos;
	Out.patch_coords = gl_TessCoord.xyz;
	Out.k = K(u);
	Out.t = T(u);
	Out.col = vec3(0);
}
